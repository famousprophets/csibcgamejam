[gd_scene load_steps=2 format=3 uid="uid://drurbcijg5syh"]

[sub_resource type="GDScript" id="GDScript_tr7ea"]
script/source = "extends Control

var fight = false

func _ready():
	$Panel/ExitButton.hide()
	Travelmanager.locationstraveled +=1
	Travelmanager.hordedist +=20
	Travelmanager.disttravel += PlayerData.caravanspeed
	$Panel/RichTextLabel.text = \"A freak approaches the caravan. He gives you a bottle that says 'Miller Lite'. He offers to stroke your shit fr crazy style. \"
	$Panel/HBoxContainer/Button.text = \"Take the beer but don't let him stroke your shit\"
	$Panel/HBoxContainer/Button2.text = \"Let him stroke your shit crazy style and take the beer\"
	$Panel/HBoxContainer/Button3.text = \"Run\"
	$Panel/HBoxContainer/Button4.text = \"Pretend you only speak spanish\"

# Rich Text Label describes the scenario to the player, and each button describes the decision

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass

#choicemade hides the choice buttons when the player makes their choice, and shows the button that lets you leave the selection screen
func choicemade():
	$Panel/HBoxContainer/Button.hide()
	$Panel/HBoxContainer/Button2.hide()
	$Panel/HBoxContainer/Button3.hide()
	$Panel/HBoxContainer/Button4.hide()
	$Panel/ExitButton.show()

# each of the buttons correlates to the choices above respectively. display stat changes by printing on a new line using \\n. Example:  $Panel/RichTextLabel.text = \"a beautiful woman punches you in the head.\\n-1 HP\" 
# and then you'd actually make the game stat change according to the outcome . game stats are accessed using PlayerData.desiredstat .All stat names and what they represent can be found in a separate txt. 
#if you want the decision to depend on a stat, do if (PlayerData.desiredstat > desirednumber:ENTER TAB as in like the enter and tab keys dont write out the words enter tab please) then youd just write in the outcome the way you would normally but indented in that if.
func _on_button_pressed():
	choicemade()
	$Panel/RichTextLabel.text = \"There is no rest for the wicked. I hope you find peace in this lifetime\"
	PlayerData.morale -= 1


func _on_button_2_pressed():
	choicemade()
	$Panel/RichTextLabel.text = \"Thanks!\"
	PlayerData.hp -=30
	PlayerData.morale += 6
	PlayerData.food -=30


func _on_button_3_pressed():
	choicemade()
	$Panel/RichTextLabel.text = \"My name is will chan and I will stroke you\"
	PlayerData.morale -= 2
	PlayerData.food +=30

  


func _on_button_4_pressed():
	choicemade()
	if PlayerData.charisma >= 2:
		$Panel/RichTextLabel.text = \"Sorry amigo, I will have corona next time\"
	else:
		$Panel/RichTextLabel.text = \"I will rape you\"
		fight = true

#changes the scene back to the caravan travel menu by default. it needs to be changed to enter a battle screen but i'll do that myself
func _on_exit_button_pressed():
	get_tree().change_scene_to_file(\"res://caravanscreen/caravan.tscn\")
"

[node name="ChoiceSceneTemplate" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_tr7ea")

[node name="Panel" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="RichTextLabel" type="RichTextLabel" parent="Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "You begin packing for the perilous journey ahead. A merchant is exchanging supplies for trinkets. The townspeople look to you for advice on what to do"

[node name="HBoxContainer" type="HBoxContainer" parent="Panel"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_top = 465.0
offset_right = 1152.0
grow_vertical = 2

[node name="Button" type="Button" parent="Panel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "the glob"
autowrap_mode = 2

[node name="Button2" type="Button" parent="Panel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "the glob"
autowrap_mode = 2

[node name="Button3" type="Button" parent="Panel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "the glob"
autowrap_mode = 2

[node name="Button4" type="Button" parent="Panel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "the glob"
autowrap_mode = 2

[node name="ExitButton" type="Button" parent="Panel"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -75.5
offset_top = -151.0
offset_right = 75.5
grow_horizontal = 2
grow_vertical = 0
text = "Onwards..."

[connection signal="pressed" from="Panel/HBoxContainer/Button" to="." method="_on_button_pressed"]
[connection signal="pressed" from="Panel/HBoxContainer/Button2" to="." method="_on_button_2_pressed"]
[connection signal="pressed" from="Panel/HBoxContainer/Button3" to="." method="_on_button_3_pressed"]
[connection signal="pressed" from="Panel/HBoxContainer/Button4" to="." method="_on_button_4_pressed"]
[connection signal="pressed" from="Panel/ExitButton" to="." method="_on_exit_button_pressed"]
